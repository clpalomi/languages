<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Language study log • App</title>
  <style>
    /* ===== Design tokens aligned with your React UI ===== */
    :root{
      --primary: #6d28d9;         /* learning-primary */
      --primary-600:#7c3aed;
      --primary-400:#a78bfa;
      --accent:#22c55e;           /* learning-accent */
      --bg-start:#f6f7ff;
      --bg-end:#f9fafb;
      --card-bg: rgba(255,255,255,.9);
      --radius: 16px;
      --shadow-md: 0 10px 30px rgba(17,24,39,.08);
      --muted:#6b7280;
      --border:#e5e7eb;
      --badge:#eef2ff;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg-start:#0f1117;
        --bg-end:#0b0e14;
        --card-bg: rgba(22,24,29,.7);
        --border:#2a2f39;
        --muted:#9aa3b2;
        --shadow-md: 0 12px 40px rgba(0,0,0,.35);
        --badge:#151928;
      }
    }

    /* Reset & page bg */
    *,*::before,*::after{ box-sizing:border-box; }
    body{
      margin:0; padding:24px; min-height:100svh;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:#111827;
      background:
        radial-gradient(1000px 600px at -10% -10%, #eef2ff 0%, transparent 60%),
        radial-gradient(900px 500px at 110% -20%, #fce7f3 0%, transparent 60%),
        linear-gradient(var(--bg-start), var(--bg-end));
    }
    @media (prefers-color-scheme: dark){ body{ color:#e5e7eb; } }

    /* Layout: two cards side-by-side (stack on mobile) */
    .page{
      max-width: 1120px; margin: 0 auto; display:grid; gap:20px;
      grid-template-columns: 1fr; align-items:start;
    }
    @media (min-width: 980px){
      .page{ grid-template-columns: 1.3fr .9fr; }
    }

    /* Generic card container */
    .card{
      width:100%; border:1px solid var(--border);
      background: var(--card-bg); backdrop-filter: blur(8px);
      border-radius: var(--radius); box-shadow: var(--shadow-md);
      overflow:hidden;
    }

    /* ======= LEFT: STUDY LOG (existing) ======= */
    .card-header{
      padding:20px 24px;
      background: linear-gradient(90deg, var(--primary-600), var(--primary));
      color:#fff;
    }
    .header-row{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .title{
      display:flex; align-items:center; gap:10px;
      font-size:20px; font-weight:800; letter-spacing:-.01em;
    }
    .title .icon{ width:22px; height:22px }
    .header-sub{ margin:8px 0 0; font-size:13px; color:#ffffffde; }
    #signout{
      height:36px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,.28);
      background: rgba(255,255,255,.1); color:#fff; font-weight:600; cursor:pointer;
      display:inline-flex; align-items:center; gap:8px;
      transition: background .2s, transform .02s;
    }
    #signout:hover{ background: rgba(255,255,255,.18); }
    #signout:active{ transform: translateY(1px); }

    .card-content{ padding: 20px 24px 24px; }
    .muted{ color:var(--muted); font-size:12px; }
    .info{ margin:6px 0 18px; }

    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    @media (max-width:720px){ .grid{ grid-template-columns:1fr; } }

    .field label{
      display:block; font-size:12px; font-weight:600; color:var(--muted); margin:0 0 6px;
    }
    input[type="number"], input[type="text"]{
      width:100%; height:44px; padding:10px 12px; border-radius:12px;
      border:1px solid var(--border); background:#fff; color:#111827;
      transition: box-shadow .2s, border-color .2s, background .2s;
      outline:0;
    }
    input::placeholder{ color:#9aa3af; }
    input:focus{
      border-color: var(--primary-600);
      box-shadow:0 0 0 3px color-mix(in srgb, var(--primary-600) 25%, transparent);
    }
    @media (prefers-color-scheme: dark){
      input[type="number"], input[type="text"]{ background:#111318; color:#e5e7eb; }
    }

    .actions{ margin-top:12px; display:flex; align-items:center; gap:12px; }
    #status{ font-size:12px; color:var(--muted); min-height: 18px; }

    #save{
      height:44px; padding:0 16px; width:100%;
      border-radius:12px; border:0; color:#fff;
      background: linear-gradient(180deg, var(--primary-600), var(--primary));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 6px 20px rgba(124,58,237,.28);
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      transition: filter .15s, transform .02s;
    }
    #save:hover{ filter: brightness(1.05); }
    #save:active{ transform: translateY(1px); }
    .spinner{
      width:16px; height:16px; border-radius:999px; border:2px solid rgba(255,255,255,.6);
      border-top-color:#fff; animation: spin .8s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    .section-title{
      margin:22px 0 8px; font-size:18px; font-weight:700; letter-spacing:-.01em;
      display:flex; align-items:center; gap:8px;
    }
    .pill{
      padding:.2rem .5rem; border-radius:999px;
      background: color-mix(in srgb, var(--primary-400) 18%, transparent);
      color: var(--primary-600); font-weight:700; font-size:14px;
    }

    .table-wrap{
      border:1px solid var(--border); border-radius:12px; overflow:hidden; background:rgba(255,255,255,.6);
    }
    table{ width:100%; border-collapse:collapse; }
    thead{ background: color-mix(in srgb, #000 6%, transparent); }
    th,td{ padding:12px 14px; border-bottom:1px solid var(--border); }
    th{ font-size:12px; color:var(--muted); text-align:left; font-weight:700; }
    td{ font-size:14px; }
    td.right{ text-align:right; font-weight:700; color: var(--primary-600); }
    tbody tr:hover{ background: color-mix(in srgb, #000 4%, transparent); }
    .empty{ padding:28px 14px; text-align:center; color:var(--muted); }
    @media (prefers-color-scheme: dark){
      .table-wrap{ background: rgba(17,19,24,.55); }
      thead{ background: rgba(255,255,255,.04); }
      tbody tr:hover{ background: rgba(255,255,255,.04); }
      td.right{ color: var(--primary-400); }
    }

    /* ======= RIGHT: PRIVATE SESSION BOX (from PrivateSessionCard.tsx) ======= */
    .ps-header{
      padding:20px 24px;
      background: linear-gradient(90deg, var(--primary-400), var(--primary-600));
      color:#fff;
    }
    .ps-title{ display:flex; align-items:center; gap:10px; font-size:18px; font-weight:800; }
    .ps-sub{ margin-top:6px; font-size:13px; color:#ffffffde; }
    .ps-content{ padding: 20px 24px 24px; display:grid; gap:16px; }

    .ps-status{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:12px; border:1px solid color-mix(in srgb, var(--accent) 28%, transparent);
      background: color-mix(in srgb, var(--accent) 8%, transparent);
      border-radius:12px;
    }
    .dot{ width:10px; height:10px; border-radius:999px; background: var(--accent); box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent) 28%, transparent); }
    .ps-badge{
      padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700;
      background: var(--badge); color: var(--primary-600); border:1px solid color-mix(in srgb, var(--primary-600) 18%, transparent);
    }

    .ps-group h4{ margin:0 0 6px; font-size:12px; font-weight:700; color:var(--muted); letter-spacing:.08em; text-transform:uppercase; }
    .ps-feature{
      display:flex; align-items:flex-start; gap:10px; padding:10px;
      border-radius:12px; transition: background .15s;
    }
    .ps-feature:hover{ background: color-mix(in srgb, #000 5%, transparent); }
    .ps-feature .fi{ width:20px; height:20px; color: var(--primary-600); margin-top:2px; }
    .ps-feature .ft{ font-size:14px; font-weight:600; }
    .ps-feature .fd{ font-size:12px; color: var(--muted); }

    .ps-stats{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .ps-stat{
      text-align:center; padding:12px; border-radius:12px;
      border:1px solid color-mix(in srgb, var(--primary-600) 18%, transparent);
      background: color-mix(in srgb, var(--primary-400) 6%, transparent);
    }
    .ps-stat .num{ font-size:22px; font-weight:800; color: var(--primary-600); }
    .ps-stat .lbl{ font-size:12px; color: var(--muted); }
    @media (prefers-color-scheme: dark){
      .ps-feature:hover{ background: rgba(255,255,255,.04); }
    }

    .ps-start{
      height:44px; padding:0 16px; width:100%;
      border-radius:12px; border:0; color:#fff;
      background: linear-gradient(180deg, var(--primary-600), var(--primary));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 6px 20px rgba(124,58,237,.28);
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      font-weight:700; cursor:pointer; transition: filter .15s, transform .02s;
    }
    .ps-start:hover{ filter: brightness(1.05); }
    .ps-start:active{ transform: translateY(1px); }
    .ps-note{ font-size:12px; color:var(--muted); text-align:center; }

    /* Utility icons */
    .icon-16{ width:16px; height:16px }
  </style>
  <script type="module" src="./js/app-page.js"></script>
</head>
<body>
  <div class="page">
    <!-- LEFT: STUDY LOG (keeps original IDs) -->
    <div class="card" id="study-log-card">
      <div class="card-header">
        <div class="header-row">
          <div class="title">
            <!-- Book icon -->
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 6.5A2.5 2.5 0 0 1 6.5 4H20v14.25c0 .966-.784 1.75-1.75 1.75H6.5A2.5 2.5 0 0 0 4 22V6.5Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M4 6.5A2.5 2.5 0 0 1 6.5 4H20M4 6.5V22" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Language Study Log
          </div>
          <button id="signout" type="button" title="Sign out">
            <svg class="icon-16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M15 17l5-5-5-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M20 12H9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 19a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Sign out
          </button>
        </div>
        <p class="header-sub">Track your daily language learning progress</p>
      </div>

      <div class="card-content">
        <p class="info muted">Date is auto-set to today. Each user has their own rows via <code>user_id</code>.</p>

        <div class="grid">
          <div class="field">
            <label for="minutes">Study Minutes</label>
            <input id="minutes" type="number" min="0" step="1" placeholder="e.g., 30" />
          </div>
          <div class="field">
            <label for="language">Language</label>
            <input id="language" type="text" list="langs" placeholder="e.g., German" />
            <datalist id="langs">
              <option>Polish</option><option>Russian</option><option>Georgian</option>
              <option>Japanese</option><option>French</option><option>Italian</option>
              <option>Spanish</option>
            </datalist>
          </div>
        </div>

        <div class="actions">
          <button id="save" type="button"><span class="btn-label">Save Study Session</span></button>
          <span id="status" class="muted" aria-live="polite"></span>
        </div>

        <h3 class="section-title">
          Today: <span id="today" class="pill">—</span>
        </h3>

        <div class="table-wrap" role="region" aria-live="polite" aria-label="Today entries">
          <table>
            <thead>
              <tr><th>Date</th><th>Language</th><th class="right">Minutes</th></tr>
            </thead>
            <tbody id="rows">
              <tr><td colspan="3" class="empty">Loading…</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- RIGHT: PRIVATE SESSION BOX (CTA → session.html) -->
    <aside class="card" id="private-session-card" aria-labelledby="ps-heading">
      <div class="ps-header">
        <div class="ps-title" id="ps-heading">
          <!-- Users icon -->
          <svg class="icon-16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M16 11a4 4 0 1 0-8 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M20 21a6 6 0 0 0-16 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="12" cy="7" r="3" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          Private Study Session
        </div>
        <p class="ps-sub">Start a focused, private learning session tailored just for you.</p>
      </div>

      <div class="ps-content">
        <!-- Status -->
        <div class="ps-status">
          <div style="display:flex;align-items:center;gap:10px;">
            <div class="dot" aria-hidden="true"></div>
            <span class="ft">Ready to start</span>
          </div>
          <span class="ps-badge">Available</span>
        </div>

        <!-- Features -->
        <div class="ps-group">
          <h4>Session Features</h4>

          <div class="ps-feature">
            <!-- Lock icon -->
            <svg class="fi" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="4" y="11" width="16" height="9" rx="2" stroke="currentColor" stroke-width="1.5"/>
              <path d="M8 11V8a4 4 0 0 1 8 0v3" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            <div>
              <div class="ft">Private & Secure</div>
              <div class="fd">Your session is completely private</div>
            </div>
          </div>

          <div class="ps-feature">
            <!-- Timer icon -->
            <svg class="fi" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <circle cx="12" cy="13" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M9 3h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M12 13l3-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <div>
              <div class="ft">Focused Practice</div>
              <div class="fd">Distraction-free learning environment</div>
            </div>
          </div>

          <div class="ps-feature">
            <!-- Target icon -->
            <svg class="fi" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="12" cy="12" r="1.2" fill="currentColor"/>
            </svg>
            <div>
              <div class="ft">Personalized</div>
              <div class="fd">Tailored to your learning goals</div>
            </div>
          </div>
        </div>

        <!-- Quick stats -->
        <div class="ps-stats">
          <div class="ps-stat">
            <div class="num" id="ps-sessions-today">0</div>
            <div class="lbl">Sessions Today</div>
          </div>
          <div class="ps-stat">
            <div class="num" id="ps-total-minutes">0</div>
            <div class="lbl">Total Minutes</div>
          </div>
        </div>

        <!-- Start button -->
        <div>
          <button id="ps-start" class="ps-start" type="button">
            <!-- Play icon -->
            <svg class="icon-16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" style="margin-right:2px">
              <path d="M8 5v14l11-7-11-7z"/>
            </svg>
            Start Private Session
          </button>
          <p class="ps-note">This will open your personalized study environment</p>
        </div>
      </div>
    </aside>
  </div>

  <!-- JS: keep left card loading UX; wire right button to session.html -->
  <script>
    // Left card tiny UX enhancer (same as before)
    const saveBtn = document.getElementById('save');
    const statusEl = document.getElementById('status');
    function showSavingUI(isSaving){
      if(!saveBtn) return;
      saveBtn.disabled = !!isSaving;
      if(isSaving){
        if(!saveBtn.querySelector('.spinner')){
          const sp = document.createElement('div'); sp.className = 'spinner'; sp.setAttribute('aria-hidden','true');
          saveBtn.insertBefore(sp, saveBtn.firstChild);
        }
        statusEl && (statusEl.textContent = 'Saving...');
      }else{
        const sp = saveBtn.querySelector('.spinner'); if(sp) sp.remove();
      }
    }
    saveBtn?.addEventListener('click', () => {
      showSavingUI(true);
      window.__savingTimeout && clearTimeout(window.__savingTimeout);
      window.__savingTimeout = setTimeout(() => showSavingUI(false), 4000);
    });
    window.__doneSaving = () => { showSavingUI(false); };

    // Right card: navigate to session.html (you'll build it)
    const startBtn = document.getElementById('ps-start');
    startBtn?.addEventListener('click', () => {
      // Simple optimistic feedback
      startBtn.disabled = true;
      startBtn.style.filter = 'brightness(1.05)';
      setTimeout(() => { window.location.href = 'session.html'; }, 250);
    });

    // Optional: if you later compute these stats, set innerText:
    // document.getElementById('ps-sessions-today').innerText = String(n);
    // document.getElementById('ps-total-minutes').innerText = String(m);
  </script>

  <!-- Keep your app logic -->
  <script type="module" src="./js/app-page.js"></script>
</body>
</html>
